<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Henia Cisneros ‚Äî Libro Elegante</title>
<style>
:root{
  --cover-dark:#3a1f2c; /* cuero elegante oscuro */
  --cover-light:#5b3245;
  --paper:#fbf6ec;
  --paper-edge:#e5d6bf;
  --gold:#c9a84f;
  --stitch:#d2b27a;
  --shadow: rgba(0,0,0,0.5);
  --desk-1:#a17c5a;
  --desk-2:#8a6242;
}

html,body{
  height:100%;
  margin:0;
  font-family: 'Cormorant Garamond', Georgia, serif;
  background: linear-gradient(180deg,var(--desk-1),var(--desk-2));
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  color:#2f241f;
}

.scene{
  width:94vw; max-width:1100px; height:84vh; max-height:760px;
  border-radius:14px;
  box-shadow:0 30px 90px rgba(0,0,0,0.6), inset 0 6px 24px rgba(255,255,255,0.02);
  background: linear-gradient(180deg, rgba(0,0,0,0.06), rgba(255,255,255,0.02));
  position:relative; 
  padding:28px; 
  display:flex; 
  align-items:center; 
  justify-content:center;
}

.book-wrap{
  width:680px; max-width:86%; height:520px; max-height:86%;
  perspective:3300px; 
  display:flex; 
  align-items:center; 
  justify-content:center; 
  position:relative; 
  transform: translateY(8%);
}

.book-shadow{
  position:absolute; bottom:4%; width:58%; height:22px;
  background:radial-gradient(closest-side, rgba(0,0,0,0.55), transparent); 
  filter:blur(18px); z-index:1;
}

.book{
  width:540px; height:420px; 
  position:relative; transform-style:preserve-3d; 
  z-index:10; display:block;
}

.cover, .backcover{
  position:absolute; left:0; top:0; width:100%; height:100%;
  border-radius:10px; box-sizing:border-box;
  display:flex; align-items:center; justify-content:center; text-align:center;
  padding:30px;
  backface-visibility:hidden; transform-style:preserve-3d; z-index:60;
  will-change: transform;
  transform: translateZ(0.01px);
}

.cover{
  background: linear-gradient(180deg, var(--cover-dark), var(--cover-light));
  box-shadow: 0 18px 60px rgba(0,0,0,0.6), inset 0 8px 26px rgba(255,255,255,0.02);
  border: 3px solid rgba(0,0,0,0.38);
  transform-origin: left center;
  position:relative; overflow:visible;
  font-weight:700;
}

.cover .title{
  color:var(--gold); font-size:2rem; letter-spacing:1px; position:relative;
  text-shadow: 0 1px 0 rgba(255,255,255,0.05), 0 2px 6px rgba(0,0,0,0.65), 0 -1px 0 rgba(0,0,0,0.12);
  transform: translateZ(6px);
}

.cover .subtitle{
  margin-top:12px;
  font-size:1rem;
  color: #e2cfa0;
}

.cover::before{
  content:'';
  position:absolute; inset:8px;
  border-radius:8px; pointer-events:none; 
  box-shadow: inset 0 0 0 2px rgba(0,0,0,0.12);
}

.backcover{
  transform-origin:right center;
  transform: rotateY(180deg);
  background: linear-gradient(180deg,var(--cover-light),var(--cover-dark));
  border:3px solid rgba(0,0,0,0.28);
  box-shadow: 0 10px 40px rgba(0,0,0,0.55), inset 0 6px 18px rgba(255,255,255,0.02);
  position:relative;
}

.stitch{
  position:absolute; right:22px; top:12%; height:76%; width:8px; 
  display:flex; flex-direction:column; align-items:center; justify-content:space-between; z-index:120;
}

.stitch span{ display:block; width:6px; height:6px; background:var(--stitch); border-radius:2px; box-shadow:0 2px 2px rgba(0,0,0,0.25); transform:rotate(12deg); opacity:0.95 }

.pages{ position:absolute; left:0; top:0; width:100%; height:100%; transform-style:preserve-3d; pointer-events:auto; z-index:50; }

.page{
  position:absolute; left:0; top:0; width:100%; height:100%; border-radius:6px; box-sizing:border-box;
  background: linear-gradient(180deg, var(--paper), #f6eadc);
  border:1px solid rgba(0,0,0,0.06);
  padding:20px; overflow:hidden; transform-origin:left center; backface-visibility:hidden;
  transition: transform 760ms cubic-bezier(.2,.9,.25,1), box-shadow 360ms ease;
  display:flex; align-items:center; justify-content:center; will-change: transform;
}

.page::after{
  content:''; position:absolute; right:-12px; top:10px; bottom:10px; width:14px; border-radius:3px;
  background: linear-gradient(180deg, var(--paper-edge), rgba(0,0,0,0.02)); 
  box-shadow: inset 0 0 6px rgba(0,0,0,0.06);
}

.inner{
  width:94%; height:92%; border-radius:4px; padding:16px; box-sizing:border-box;
  display:flex; align-items:center; justify-content:center; text-align:center; color:#3b2d26; font-size:1.02rem; line-height:1.55;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.01));
}

.page img{ width:100%; height:100%; object-fit:cover; border-radius:6px; box-shadow:0 6px 18px rgba(0,0,0,0.16) inset; }

.page.turning{ transform: rotateY(-92deg) translateX(6px) scale(1.01); box-shadow: -28px 14px 70px rgba(0,0,0,0.5); z-index:9999 !important; }
.page.flipped{ transform: rotateY(-180deg) translateX(-8px); box-shadow:-6px 10px 32px rgba(0,0,0,0.36); z-index:5 !important; }

.controls{ position:absolute; bottom:14px; left:0; right:0; display:flex; justify-content:center; gap:14px; pointer-events:none; z-index:160; }
.btn{ pointer-events:auto; background: linear-gradient(180deg,#fff,#f4efe4); border-radius:10px; padding:10px 14px; border:1px solid rgba(0,0,0,0.06); font-weight:700; cursor:pointer; box-shadow:0 8px 20px rgba(0,0,0,0.18); opacity:0; transform:translateY(8px); transition:opacity .28s, transform .28s;}
.book-wrap:hover .btn, .book-wrap.touching .btn{ opacity:1; transform:translateY(0); }

.top-controls{ position:absolute; top:12px; right:18px; display:flex; gap:10px; z-index:180; }
.top-controls button{ background:rgba(255,255,255,0.92); border:1px solid rgba(0,0,0,0.06); padding:8px 10px; border-radius:8px; cursor:pointer; font-weight:700 }

@media (max-width:720px){
  .book{ width:86vw; height:74vw; }
  .inner{ font-size:0.94rem; padding:12px; }
  .cover .title{ font-size:1.4rem }
}
</style>
</head>
<body>
<div class="scene">
  <div class="book-wrap" id="bookWrap">
    <div class="book-shadow" aria-hidden="true"></div>

    <div class="book" id="book">
      <div class="cover" id="cover">
        <div>
          <div class="title">Henia Cisneros</div>
          <div class="subtitle">Por un d√≠a lleno de cari√±o y alegr√≠a</div>
        </div>
      </div>

      <div class="pages" id="pages">
        <div class="page" data-index="0"><div class="inner"><img src="img/pagina1.jpg" alt="Foto 1"></div></div>
        <div class="page" data-index="1"><div class="inner"><p>Querida Henia, gracias por tu amor y por todo lo que inspiras.</p></div></div>
        <div class="page" data-index="2"><div class="inner"><img src="img/pagina2.jpg" alt="Foto 2"></div></div>
        <div class="page" data-index="3"><div class="inner"><img src="img/pagina3.jpg" alt="Foto 3"></div></div>
        <div class="page" data-index="4"><div class="inner"><p>Que nunca falte en tu vida la alegr√≠a, la paz y la sonrisa que siempre te acompa√±a.</p><p style="margin-top:20px; font-weight:700;">Con cari√±o,<br>Manuel</p></div></div>
      </div>

      <div class="backcover" id="backcover">
        <div class="stitch" aria-hidden="true">
          <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
        </div>
      </div>
    </div>

    <div class="controls">
      <button class="btn" id="prevBtn">‚üµ Atr√°s</button>
      <button class="btn" id="nextBtn">Siguiente ‚ü∂</button>
    </div>

    <div class="top-controls">
      <button id="audioBtn">üîà M√∫sica</button>
      <button id="resetBtn">‚§∫ Volver</button>
    </div>
  </div>
</div>

<audio id="pageSound" preload="auto">
  <source src="https://www.soundjay.com/books/page-turn-4.mp3" type="audio/mpeg">
</audio>
<audio id="bgMusic" preload="auto" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_efc06752a0.mp3?filename=soft-piano-ambient-112191.mp3" type="audio/mpeg">
</audio>

<script>
(function(){
  const pagesContainer = document.getElementById('pages');
  let pageEls = Array.from(pagesContainer.querySelectorAll('.page'));
  const cover = document.getElementById('cover');
  const backcover = document.getElementById('backcover');
  const nextBtn = document.getElementById('nextBtn');
  const prevBtn = document.getElementById('prevBtn');
  const resetBtn = document.getElementById('resetBtn');
  const audioBtn = document.getElementById('audioBtn');
  const pageSound = document.getElementById('pageSound');
  const bgMusic = document.getElementById('bgMusic');
  const bookWrap = document.getElementById('bookWrap');
  let current = 0;
  let audioOn = false;
  const total = pageEls.length;
  let isAnimating = false;

  function syncSizing(){
    const book = document.getElementById('book');
    const r = book.getBoundingClientRect();
    [cover, backcover, pagesContainer].forEach(el=>{
      el.style.width = r.width + 'px';
      el.style.height = r.height + 'px';
    });
    pageEls.forEach(p=>{ p.style.width = r.width + 'px'; p.style.height = r.height + 'px'; });
  }
  setTimeout(syncSizing, 40);
  window.addEventListener('resize', syncSizing);

  function setStack(){
    pageEls.forEach((p,i) => { p.style.zIndex = (1000 - i*2).toString(); });
  }
  setStack();

  function playPageSound(){ if(audioOn){ pageSound.currentTime=0; pageSound.play().catch(()=>{}); } }
  function tryPlayBg(){ if(audioOn){ bgMusic.volume=0.22; bgMusic.play().then(()=> audioBtn.textContent='üîä M√∫sica ON').catch(()=>{ audioBtn.textContent='üîà M√∫sica'; }); } }

  function flipNext(){
    if(isAnimating) return;
    if(current>=total){ backcover.style.transform='rotateY(0deg)'; cover.style.transform='rotateY(0deg)'; return; }
    const page = pageEls[current];
    if(!page) return;
    isAnimating=true;
    page.style.zIndex=9999;
    page.classList.add('turning');
    playPageSound();
    if(current===0){ cover.style.transition='transform 520ms cubic-bezier(.2,.9,.25,1)'; cover.style.transform='rotateY(-130deg)'; }
    setTimeout(()=>{
      page.classList.remove('turning');
      page.classList.add('flipped');
      page.style.zIndex = (10+current).toString();
      current++;
      if(current===total){ setTimeout(()=>{ backcover.style.transform='rotateY(0deg)'; cover.style.transform='rotateY(0deg)'; }, 380); }
      isAnimating=false;
    },440);
  }

  function flipPrev(){
    if(isAnimating || current<=0) return;
    const idx=current-1;
    const page=pageEls[idx];
    if(!page) return;
    isAnimating=true;
    page.style.zIndex=9999;
    page.classList.remove('flipped');
    playPageSound();
    setTimeout(()=>{ setStack(); isAnimating=false; },460);
    current--;
    backcover.style.transform='rotateY(180deg)';
    cover.style.transform = (current===0? 'rotateY(0deg)' : 'rotateY(-140deg)');
  }

  nextBtn.addEventListener('click',flipNext);
  prevBtn.addEventListener('click',flipPrev);

  resetBtn.addEventListener('click',()=>{
    pageEls.forEach(p => { p.classList.remove('flipped','turning'); });
    current=0;
    setStack();
    backcover.style.transform='rotateY(180deg)';
    cover.style.transform='rotateY(0deg)';
  });

  audioBtn.addEventListener('click',()=>{
    audioOn=!audioOn; tryPlayBg();
    if(!audioOn){ bgMusic.pause(); audioBtn.textContent='üîà M√∫sica'; }
  });

  bookWrap.addEventListener('click',(ev)=>{
    const rect=ev.currentTarget.getBoundingClientRect();
    const x=ev.clientX-rect.left;
    const edge=Math.max(40, rect.width*0.12);
    if(x>rect.width-edge) flipNext();
    else if(x<edge) flipPrev();
    else flipNext();
  });

  let startX=0, startY=0, moved=false;
  bookWrap.addEventListener('touchstart',(e)=>{ const t=e.touches[0]; startX=t.clientX; startY=t.clientY; moved=false; bookWrap.classList.add('touching'); },{passive:true});
  bookWrap.addEventListener('touchmove',(e)=>{ moved=true; },{passive:true});
  bookWrap.addEventListener('touchend',(e)=>{
    bookWrap.classList.remove('touching');
    const t=e.changedTouches[0]; const dx=t.clientX-startX; const dy=t.clientY-startY;
    const absDx=Math.abs(dx), absDy=Math.abs(dy);
    if(absDx>30 && absDx>absDy){ dx<0?flipNext():flipPrev(); }
    else{ if(!moved) flipNext(); }
  },{passive:true});

  document.addEventListener('keydown',(e)=>{ if(e.key==='ArrowRight') flipNext(); if(e.key==='ArrowLeft') flipPrev(); });

  backcover.style.transform='rotateY(180deg)';

  function autoOpen(){
    cover.style.transition='transform 700ms cubic-bezier(.2,.9,.25,1)';
    setTimeout(()=>{ cover.style.transform='rotateY(-120deg)'; playPageSound(); },60);
    setTimeout(()=>{ cover.style.transform='rotateY(-150deg)'; playPageSound(); },500);
    setTimeout(()=>{ cover.style.transform='rotateY(0deg)'; },1000);
  }
  autoOpen();
})();
</script>
</body>
</html>
