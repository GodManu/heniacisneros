<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Henia Cisneros ‚Äî Libro Especial</title>
<style>
:root{
  --desk:#a87b5f; /* madera elegante */
  --cover:#3b1f2c; /* cuero oscuro */
  --cover-light:#5a3245;
  --gold:#c9a84f;
  --paper:#fbf6ec;
  --paper-edge:#e5d6bf;
  --stitch:#d2b27a;
  --shadow: rgba(0,0,0,0.5);
}

/* body & background */
html, body{
  height:100%; margin:0;
  font-family: 'Cormorant Garamond', Georgia, serif;
  background: linear-gradient(180deg, var(--desk) 0%, #cba67f 100%);
  display:flex; justify-content:center; align-items:center;
  overflow:hidden;
}

/* book container */
.book-container{
  width:90vw; max-width:1100px;
  height:75vh; max-height:700px;
  perspective:2000px;
  display:flex; justify-content:center; align-items:center;
}

/* spine & book */
.book{
  width:600px; height:420px;
  position:relative;
  transform-style:preserve-3d;
  transform-origin:center left;
}

/* common page/cover */
.page, .cover, .backcover{
  width:100%; height:100%;
  position:absolute;
  top:0; left:0;
  border-radius:10px;
  transform-style:preserve-3d;
  backface-visibility:hidden;
  display:flex; justify-content:center; align-items:center;
  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  overflow:hidden;
  transition: transform 0.8s cubic-bezier(.2,.9,.25,1);
}

/* cover */
.cover{
  background: linear-gradient(180deg, var(--cover), var(--cover-light));
  border:2px solid rgba(0,0,0,0.35);
  font-size:2rem;
  color:var(--gold);
  text-align:center;
  flex-direction:column;
  padding:30px;
}
.cover .subtitle{
  font-size:1.2rem;
  margin-top:12px;
  font-weight:400;
}

/* backcover */
.backcover{
  background: linear-gradient(180deg, var(--cover-light), var(--cover));
  transform: rotateY(180deg);
  border:2px solid rgba(0,0,0,0.35);
  position:absolute;
}
.stitch{
  position:absolute; right:20px; top:12%; height:76%; width:6px;
  display:flex; flex-direction:column; justify-content:space-between;
}
.stitch span{
  width:4px; height:4px;
  background:var(--stitch);
  border-radius:50%;
}

/* pages */
.page{
  background: linear-gradient(180deg, var(--paper) 0%, #f6eadc 100%);
  border:1px solid rgba(0,0,0,0.08);
  border-radius:6px;
}
.page .inner{
  width:90%; height:90%;
  display:flex; justify-content:center; align-items:center;
  flex-direction:column;
  text-align:center;
  padding:12px;
  box-sizing:border-box;
}
.page img{
  max-width:48%; max-height:45%;
  margin:6px;
  border-radius:6px;
  object-fit:cover;
  box-shadow:0 4px 12px rgba(0,0,0,0.16) inset;
}
.page p{
  margin:12px 0 0 0;
  font-size:1rem;
  line-height:1.5;
  color:#3b2d26;
}

/* flipped pages */
.page.flipped{ transform: rotateY(-180deg); z-index:0; }
.cover.flipped{ transform: rotateY(-180deg); }
.backcover.flipped{ transform: rotateY(0deg); }

/* controls */
.controls{
  position:absolute; bottom:20px; left:50%; transform:translateX(-50%);
  display:flex; gap:12px;
}
button{
  padding:10px 16px; border-radius:8px; border:none;
  font-weight:700; cursor:pointer; background:#fff; box-shadow:0 4px 12px rgba(0,0,0,0.2);
  transition:0.2s;
}
button:hover{ background:#f4f0e8; }

/* responsive */
@media(max-width:720px){
  .book{ width:90vw; height:70vw; }
  .page img{ max-width:90%; max-height:40%; }
  .cover{ font-size:1.5rem; }
  .cover .subtitle{ font-size:1rem; }
}
</style>
</head>
<body>
<div class="book-container">
  <div class="book" id="book">
    <!-- Cover -->
    <div class="cover" id="cover">
      Henia Cisneros
      <div class="subtitle">por un d√≠a especial</div>
    </div>

    <!-- Pages -->
    <div class="page" data-index="0">
      <div class="inner">
        <img src="img/pagina1a.jpg" alt="Foto1">
        <p>Primera dedicatoria o frase bonita.</p>
        <img src="img/pagina1b.jpg" alt="Foto2">
      </div>
    </div>

    <div class="page" data-index="1">
      <div class="inner">
        <img src="img/pagina2a.jpg" alt="Foto1">
        <p>Segunda dedicatoria o mensaje especial.</p>
        <img src="img/pagina2b.jpg" alt="Foto2">
      </div>
    </div>

    <div class="page" data-index="2">
      <div class="inner">
        <img src="img/pagina3a.jpg" alt="Foto1">
        <p>Tercera dedicatoria o mensaje especial.</p>
        <img src="img/pagina3b.jpg" alt="Foto2">
      </div>
    </div>

    <div class="page" data-index="3">
      <div class="inner">
        <p>Con cari√±o,</p>
        <p>Manuel</p>
      </div>
    </div>

    <!-- Backcover -->
    <div class="backcover" id="backcover">
      <div class="stitch">
        <span></span><span></span><span></span><span></span><span></span>
      </div>
    </div>
  </div>
</div>

<!-- Controls -->
<div class="controls">
  <button id="prevBtn">‚üµ Atr√°s</button>
  <button id="nextBtn">Siguiente ‚ü∂</button>
  <button id="resetBtn">‚§∫ Volver</button>
  <button id="audioBtn">üîà M√∫sica</button>
</div>

<!-- Audio -->
<audio id="pageSound" preload="auto">
  <source src="https://www.soundjay.com/books/page-turn-4.mp3" type="audio/mpeg">
</audio>
<audio id="bgMusic" preload="auto" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_efc06752a0.mp3?filename=soft-piano-ambient-112191.mp3" type="audio/mpeg">
</audio>

<script>
(function(){
  const pages = Array.from(document.querySelectorAll('.page'));
  const cover = document.getElementById('cover');
  const backcover = document.getElementById('backcover');
  const nextBtn = document.getElementById('nextBtn');
  const prevBtn = document.getElementById('prevBtn');
  const resetBtn = document.getElementById('resetBtn');
  const audioBtn = document.getElementById('audioBtn');
  const pageSound = document.getElementById('pageSound');
  const bgMusic = document.getElementById('bgMusic');
  let current = 0;
  let audioOn = false;
  const total = pages.length;

  function playPageSound(){ if(audioOn){ pageSound.currentTime=0; pageSound.play().catch(()=>{}); } }
  function tryPlayMusic(){ if(audioOn){ bgMusic.volume=0.22; bgMusic.play().catch(()=>{}); } }

  function flipNext(){
    if(current < total){
      // portada
      if(current===0) cover.classList.add('flipped');

      // p√°gina actual
      const page = pages[current];
      page.style.zIndex = 2000 - current; // apila correctamente
      page.classList.add('flipped');
      playPageSound();

      current++;

      // si ya pasamos la √∫ltima p√°gina, mostrar contraportada
      if(current === total){
        backcover.classList.add('flipped');
        backcover.style.zIndex = 1; // siempre detr√°s de todo
      }
    }

function flipPrev(){
    if(current > 0){
      current--;
      const page = pages[current];
      page.classList.remove('flipped');
      page.style.zIndex = 2000 - current;
      playPageSound();

      // si regresamos a la portada, ocultar contraportada
      if(current < total){
        backcover.classList.remove('flipped');
      }

      if(current===0) cover.classList.remove('flipped');
    }
}


  nextBtn.addEventListener('click', flipNext);
  prevBtn.addEventListener('click', flipPrev);
  resetBtn.addEventListener('click', ()=>{
    cover.classList.remove('flipped');
    backcover.classList.remove('flipped');
    pages.forEach(p=>p.classList.remove('flipped'));
    current=0;
  });

  audioBtn.addEventListener('click', ()=>{
    audioOn=!audioOn;
    tryPlayMusic();
    audioOn?audioBtn.textContent='üîä M√∫sica ON':audioBtn.textContent='üîà M√∫sica';
  });

  // click on book
  const book = document.getElementById('book');
  book.addEventListener('click',(e)=>{
    const rect = book.getBoundingClientRect();
    const x = e.clientX - rect.left;
    if(x > rect.width*0.6) flipNext();
    else if(x < rect.width*0.4) flipPrev();
  });

  // touch
  let startX=0;
  book.addEventListener('touchstart',e=>{ startX=e.touches[0].clientX; }, {passive:true});
  book.addEventListener('touchend', e=>{
    const dx=e.changedTouches[0].clientX-startX;
    if(dx<-20) flipNext(); else if(dx>20) flipPrev();
  }, {passive:true});

  // arrow keys
  document.addEventListener('keydown',e=>{
    if(e.key==='ArrowRight') flipNext();
    if(e.key==='ArrowLeft') flipPrev();
  });

  // auto open after 2s
  setTimeout(()=>{ cover.classList.add('flipped'); playPageSound(); },2000);
})();
</script>
</body>
</html>
